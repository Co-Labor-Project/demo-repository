{"version":3,"sources":["../src/container.tsx","../src/contexts/container.ts"],"sourcesContent":["import { Suspense, useEffect, useMemo, useRef, useState, createElement } from 'react';\nimport type { ReactNode, ComponentPropsWithoutRef, CSSProperties, ComponentType } from 'react';\n\nimport { ContainerContext, ContainerContextType } from './contexts/container';\n\nexport type Props = {\n  innerStyle?: CSSProperties;\n  fallback?: ReactNode;\n  /**\n   * 일반 children 혹은 render function\n   */\n  children?: ReactNode | ComponentType;\n} & Omit<ComponentPropsWithoutRef<'div'>, 'children'>;\n\nconst innerDefaultStyle: CSSProperties = { top: 0, left: 0, width: '100%', height: '100%', position: 'absolute', zIndex: 0 };\n\nexport function Container({ children, fallback, innerStyle = innerDefaultStyle, ...restProps }: Props) {\n  const ref = useRef(null);\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const containerContext = useMemo<ContainerContextType>(() => ({ element: ref.current }), [ref.current]);\n\n  return (\n    <div {...restProps} style={{ position: 'relative', ...restProps.style }}>\n      <div key='mapdiv' ref={ref} style={innerStyle} />\n      {isMounted && ref.current ? (\n        <ContainerContext.Provider value={containerContext}>\n          <Suspense fallback={null}>\n            {typeof children === 'function' ? createElement(children as ComponentType) : children}\n          </Suspense>\n        </ContainerContext.Provider>\n      ) : fallback}\n    </div>\n  );\n}\n","import { createContext, useContext } from 'react';\n\nexport type ContainerContextType = { element: HTMLElement | null };\n\nexport const ContainerContext = createContext<ContainerContextType>({ element: null });\nexport const useContainerContext = () => useContext(ContainerContext);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAA,gBAA8E;;;ACA9E,mBAA0C;AAInC,IAAM,uBAAmB,4BAAoC,EAAE,SAAS,KAAK,CAAC;;;ADuBjF;AAbJ,IAAM,oBAAmC,EAAE,KAAK,GAAG,MAAM,GAAG,OAAO,QAAQ,QAAQ,QAAQ,UAAU,YAAY,QAAQ,EAAE;AAEpH,SAAS,UAAU,EAAE,UAAU,UAAU,aAAa,sBAAsB,UAAU,GAAU;AACrG,QAAM,UAAM,sBAAO,IAAI;AACvB,QAAM,CAAC,WAAW,YAAY,QAAI,wBAAS,KAAK;AAEhD,+BAAU,MAAM;AACd,iBAAa,IAAI;AAAA,EACnB,GAAG,CAAC,CAAC;AAEL,QAAM,uBAAmB,uBAA8B,OAAO,EAAE,SAAS,IAAI,QAAQ,IAAI,CAAC,IAAI,OAAO,CAAC;AAEtG,SACE,6CAAC;AAAA,IAAK,GAAG;AAAA,IAAW,OAAO,EAAE,UAAU,YAAY,GAAG,UAAU,MAAM;AAAA,IACpE;AAAA,kDAAC;AAAA,QAAiB;AAAA,QAAU,OAAO;AAAA,SAA1B,QAAsC;AAAA,MAC9C,aAAa,IAAI,UAChB,4CAAC,iBAAiB,UAAjB;AAAA,QAA0B,OAAO;AAAA,QAChC,sDAAC;AAAA,UAAS,UAAU;AAAA,UACjB,iBAAO,aAAa,iBAAa,6BAAc,QAAyB,IAAI;AAAA,SAC/E;AAAA,OACF,IACE;AAAA;AAAA,GACN;AAEJ;","names":["import_react"]}